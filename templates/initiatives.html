{% extends "base.html" %}

{% load i18n %}
{% load get_object_properties from attributes %}
{% load staticfiles %}
{% load markdown from markdown %}

{% block title %}
    Initiatives
{% endblock %}

{% block banner %}
  <div class="init_banner">
  </div>
{% endblock %}

{% block breadcrumb %}
  <ul class="breadcrumbs list-unstyled text-s-header">
    <li>
      <a href="{% url 'home' %}">
        {% trans 'Home' context 'Main navigation item' %}
      </a>
    </li>
    <li>
      {% trans "Initiatives" context 'Main navigation item' %}
    </li>
  </ul>
{% endblock breadcrumb %}

{% block content %}
  <div class="">

    <div class="header grid grid-content_even grid-align_center p-around_large">
      <div class="grid-col">
        <button class="btn neutral">Start Your Own</button>
      </div>
      <div class="grid-col header_seperator"></div>
      <div class="grid-col header_category">
        <span class="p-right_large">About</span>
        <select>
        {% for cat in categories %}
          <option value="{{cat.value}}">{{cat.label}}</option>
        {% endfor %}
        </select>
      </div>
      <div class="grid-col header_seperator"></div>
      <div class="grid-col header_sort">
        <span class="p-right_large">Sort</span>
        <select>
        {% for sort in sortMethods %}
          <option value="{{sort.value}}">{{sort.label}}</option>
        {% endfor %}
        </select>
      </div>
    </div>

    <div class="grid grid-wrap grid-content_space">
      {% for initiative in initiatives %}

        <div class="grid-col-4 p-around_large">
          <div class="init text-body">
            <div class="init-image" style="background-image: url({{initiative.background_image_url}});"></div>
            <div class="init-detail p-around_large">
              <div class="text-s-header text-italic p-vertical_small">
                {{ initiative.name }}
              </div>
              <div class="text-title p-top_small">
                By {{ initiative.author_first_name }} {{ initiative.author_last_name }}
              </div>
              <div class="init-location p-bottom_small">
                <span class="text-weak">
                  <i class="fa fa-map-marker" aria-hidden="true"></i>
                  {{ initiative.location_state }}, {{ initiative.location_country }}
                </span>
              </div>
              <div class="text-weak text-title-caps p-vertical_small">
                {{ initiative.initiative_category }}
              </div>
              <div class="progress m-vertical_small">
                <div class="progress-bar progress-yellow" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:{{ initiative.goal_percentage }}%">
                </div>
              </div>
              <div class="text-weak">
                <span class="init-percent">{{ initiative.goal_percentage }}%</span> reached
              </div>
              <div class="text-weak">
                ${{ initiative.total_donations }} collected
              </div>
              <div class="text-weak">
                {{ initiative.donation_days_left }} more days left to go
              </div>
            </div>
          </div>
        </div>

      {% endfor %}

    </div>
  </div>
{% endblock %}